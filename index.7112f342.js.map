{"mappings":"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","sources":["src/js/modal.js","src/js/library/local-storage.js","src/js/library/add-to-watched-queue.js"],"sourcesContent":["import axios from \"axios\";\nimport { qs } from \"./tools\";\nimport { BASE_URL, API_KEY } from \"./api-variables\";\nimport { queue, watched } from \"./library/local-storage\";\nimport { onAddToWatched, onAddToQueue } from \"./library/add-to-watched-queue\";\nimport { showHideLoader } from \"./loader.js\";\nimport refs from \"./refs.js\";\n\nconst gallerysDom = qs(\".Gallery\");\nconst galleryTrendDom = qs(\".movie-section__card\");\n\nconst modal = qs(\"[data-modal]\");\nconst closeModalBtn = qs(\"[data-modal-close]\");\nconst mov = qs(\".mov\");\n\nconst toggleModal = () => modal.classList.toggle(\"is-hidden\");\n\nconst fetchMovie = async (movieId) => {\n\tshowHideLoader(refs.loader);\n\tconst response = await axios.get(\n\t\t`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US`,\n\t);\n\tshowHideLoader(refs.loader);\n\n\tconst movie = response.data;\n\n\treturn movie;\n};\nconst searchMovieById = async (movieId) => {\n\ttry {\n\t\tconst movie = await fetchMovie(movieId);\n\n\t\tconst movieName = movie.title;\n\t\tconst vote = movie.vote_average.toFixed(1);\n\t\tconst votes = movie.vote_count;\n\t\tconst popularity = movie.popularity.toFixed(1);\n\t\tconst originalTitle = movie.original_title;\n\t\tconst genres = movie.genres.map((ob) => ob.name).join(\", \");\n\t\tconst overview = movie.overview;\n\t\t//-----Fetch zwiastun\n\t\tconst zwiastun = async () => {\n\t\t\tconst response = await axios.get(\n\t\t\t\t`${BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}&language=en-US`,\n\t\t\t);\n\n\t\t\tconst video = response.data;\n\t\t\tconst vid = video.results[0].key;\n\t\t\treturn vid;\n\t\t};\n\n\t\tconst poster = movie.poster_path\n\t\t\t? `https://image.tmdb.org/t/p/${\n\t\t\t\t\twindow.devicePixelRatio > 1 ? \"w780\" : \"w500\"\n\t\t\t  }/${movie.poster_path}`\n\t\t\t: movie.title;\n\t\tmov.innerHTML = ` \n\t\t<div class=\"box modal__row\">\n              <img class=\"modal__poster\" src=${poster} alt=\"plakat filmu\" sizes=\"(min-width: 1200px) 370px\" />\n\t          <div>\n\t\t          <div class=\"modal__tittle-film\">${movieName}\n\t\t\t\t  </div>\n\t\t          <div class=\"modal__values\">\n\t\t                 <ul class=\"modal__list\">\n\t\t\t\t\t\t <li class=\"modal__details\"> \n\t\t\t\t\t\t <div class=\"modal__list-left\">Vote&nbsp/&nbspVotes</div>\n\t\t\t\t\t\t <div class=\"modal__list-right\">\n\t\t\t\t\t\t            <span class=\"modal__vote-details\">${vote}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"modal__list-left\">/</span> \n\t\t\t\t\t\t\t\t\t<span class=\"modal__vote-summary\">${votes}</span>\n\t\t\t\t\t\t </div>\n\t\t\t\t\t\t </li> \n\t\t\t\t\t\t <li class=\"modal__details\"> \n\t\t\t\t\t\t <div class=\"modal__list-left\">Popularity</div>\n\t\t\t\t\t\t <div class=\"modal__list-right\">${popularity}</div>\n\t\t\t\t\t\t </li> \n\t\t\t\t\t\t <li class=\"modal__details\"> \n\t\t\t\t\t\t <div class=\"modal__list-left\">Original&nbspTitle</div>\n\t\t\t\t\t\t <div class=\"modal__list-right\">${originalTitle}</div>\n\t\t\t\t\t\t </li> \n\t\t\t\t\t\t <li class=\"modal__details\"> \n\t\t\t\t\t\t <div class=\"modal__list-left\">Genre</div>\n\t\t\t\t\t\t <div class=\"modal__list-right\">${genres}</div>\n\t\t\t\t\t\t </li> \n\t\t\t\t\t\t </ul>\n\t\t                 \n\t\t          </div>\n\t\t          <div class=\"modal__tittle-describe-tittle\">About</div>\n\t\t             <p class=\"modal__tittle-describe\">\n\t\t              ${overview}\n\t\t                  </p>\n\t\t              <div class=\"modal__buttons\">\n\t\t             <button class=\"modal__button-watched\" id=\"watched\">add to Watched</button>\n\t\t              <button class=\"modal__button-queue\" id=\"queue\">add to queue</button>\n\t\t\t\t\t  <button class=\"modal__button-trailer\" id=\"zwiastun\">zwiastun</button>\n\t\t\t\t\t  \n\t\t                </div>\n\t\t       </div>\n\t\t</div>`;\n\t\tconst watchedButton = qs(\"#watched\");\n\t\tconst queueButton = qs(\"#queue\");\n\t\tconst zwButton = qs(\"#zwiastun\");\n\t\tconst div = document.querySelector(\"[data-mod]\");\n\t\tconst mod = document.querySelector(\"[data-mod]\");\n\t\tconst closeModBtn = document.querySelector(\"[data-mod-close]\");\n\t\tconst iframe = document.querySelector(\"iframe\");\n\t\tconst openTrailer = async () => {\n\t\t\tconst vid = await zwiastun();\n\n\t\t\tiframe.src = `https://www.youtube.com/embed/${vid}`;\n\n\t\t\tiframe.addEventListener(\"load\", () => {\n\t\t\t\tdiv.style.display = \"block\";\n\t\t\t});\n\t\t};\n\t\tzwButton.addEventListener(\n\t\t\t\"click\",\n\n\t\t\topenTrailer,\n\t\t);\n\t\tcloseModBtn.addEventListener(\"click\", (e) => {\n\t\t\te.preventDefault();\n\t\t\tdiv.style.display = \"none\";\n\t\t});\n\n\t\tconst closeByClicked = (event) => {\n\t\t\tif (event.target === mod) {\n\t\t\t\tdiv.style.display = \"none\";\n\t\t\t}\n\t\t};\n\n\t\tmod.addEventListener(\"click\", closeByClicked);\n\n\t\tconst closeByPushed = (event) => {\n\t\t\tif (event.key === \"Escape\" || event.keyCode === 27) {\n\t\t\t\tdiv.style.display = \"none\";\n\t\t\t}\n\t\t};\n\t\twindow.addEventListener(\"keydown\", closeByPushed);\n\n\t\tif (watched.find((obj) => obj.id === movie.id)) {\n\t\t\twatchedButton.style.background = \"green\";\n\t\t\twatchedButton.textContent = \"DELETED FROM WATCHED\";\n\t\t} else {\n\t\t\twatchedButton.style.background = \"#ff6b01\";\n\t\t\twatchedButton.textContent = \"ADD TO WATCHED\";\n\t\t}\n\t\tif (queue.find((obj) => obj.id === movie.id)) {\n\t\t\tqueueButton.style.background = \"#545454\";\n\t\t\tqueueButton.textContent = \"DELETED FROM QUEUE\";\n\t\t} else {\n\t\t\tqueueButton.style.background = \"white\";\n\t\t\tqueueButton.textContent = \"ADD TO QUEUE\";\n\t\t}\n\t\twatchedButton.addEventListener(\"click\", (e) => {\n\t\t\tif (watched.find((obj) => obj.id === movie.id)) {\n\t\t\t\twatchedButton.style.background = \"#ff6b01\";\n\t\t\t\twatchedButton.textContent = \"ADD TO WATCHED\";\n\t\t\t} else {\n\t\t\t\twatchedButton.style.background = \"green\";\n\t\t\t\twatchedButton.textContent = \"DELETED FROM WATCHED\";\n\t\t\t}\n\n\t\t\tonAddToWatched(movie, watchedButton);\n\t\t});\n\t\tqueueButton.addEventListener(\"click\", (e) => {\n\t\t\tif (queue.find((obj) => obj.id === movie.id)) {\n\t\t\t\tqueueButton.style.background = \"white\";\n\t\t\t\tqueueButton.textContent = \"ADD TO QUEUE\";\n\t\t\t} else {\n\t\t\t\tqueueButton.style.background = \"#545454\";\n\t\t\t\tqueueButton.textContent = \"DELETED FROM QUEUE\";\n\t\t\t}\n\t\t\tonAddToQueue(movie, queueButton);\n\t\t});\n\t} catch (error) {\n\t\tconsole.log(error.message);\n\t}\n};\n\ncloseModalBtn.addEventListener(\"click\", (e) => {\n\te.preventDefault();\n\ttoggleModal();\n});\nconst closeByClick = (event) => {\n\tif (event.target === modal) {\n\t\ttoggleModal();\n\t}\n};\nmodal.addEventListener(\"click\", closeByClick);\n\nconst closeByPush = (event) => {\n\tif (event.key === \"Escape\" || event.keyCode === 27) {\n\t\ttoggleModal();\n\t}\n};\nwindow.addEventListener(\"keydown\", closeByPush);\ngallerysDom.addEventListener(\"click\", (e) => {\n\tconst movieCard = e.target.closest(\".MovieCard\");\n\n\tif (movieCard) {\n\t\tconst movieId = movieCard.dataset.movie;\n\n\t\tsearchMovieById(movieId)\n\t\t\t.then(() => toggleModal())\n\t\t\t.catch((error) => console.error(error));\n\t}\n});\n\ngalleryTrendDom.addEventListener(\"click\", (e) => {\n\tconst movieCard = e.target.closest(\".movie-container__card\");\n\n\tif (movieCard) {\n\t\tconst movieId = movieCard.dataset.id;\n\n\t\tsearchMovieById(movieId)\n\t\t\t.then(() => toggleModal())\n\t\t\t.catch((error) => console.error(error));\n\t}\n});\n","const KEY_WATCHED = \"watched\";\nconst KEY_QUEUE = \"queue\";\n\nconst getWatchedLocalStorage = () => {\n\treturn JSON.parse(localStorage.getItem(KEY_WATCHED));\n}; // funkcja do ściągania fimów do kolejki local storage\n\nconst getQueueLocalStorage = () => {\n\treturn JSON.parse(localStorage.getItem(KEY_QUEUE));\n}; // funkcja do ściągania filmów obejrzanych z local storage\nconst watched = getWatchedLocalStorage() || [];\nconst queue = getQueueLocalStorage() || [];\nconst setWatchedLocalStorage = (arr) => {\n\tlocalStorage.setItem(KEY_WATCHED, JSON.stringify(arr));\n}; // funckja do wrzucania filmów do local storage - do obejrzanych\n\nconst setQueueLocalStorage = (arr) => {\n\tlocalStorage.setItem(KEY_QUEUE, JSON.stringify(arr));\n}; // funckja do wrzucania filmów do local storage - do kolejki\n\nexport {\n\tKEY_WATCHED,\n\tKEY_QUEUE,\n\twatched,\n\tqueue,\n\tgetWatchedLocalStorage,\n\tgetQueueLocalStorage,\n\tsetWatchedLocalStorage,\n\tsetQueueLocalStorage,\n};\n","import {\n\tqueue,\n\twatched,\n\tsetWatchedLocalStorage,\n\tsetQueueLocalStorage,\n} from \"./local-storage\";\n\nconst onAddToWatched = (movie) => {\n\tconst movieInWatched = watched.find((obj) => obj.id === movie.id);\n\tif (movieInWatched) {\n\t\twatched.splice(watched.indexOf(movieInWatched), 1);\n\t\tsetWatchedLocalStorage(watched);\n\t} else {\n\t\twatched.push(movie);\n\t\tsetWatchedLocalStorage(watched);\n\t}\n};\n\nconst onAddToQueue = (movie) => {\n\tconst movieInQueue = queue.find((obj) => obj.id === movie.id);\n\tif (movieInQueue) {\n\t\tqueue.splice(queue.indexOf(movieInQueue), 1);\n\t\tsetQueueLocalStorage(queue);\n\t} else {\n\t\tqueue.push(movie);\n\t\tsetQueueLocalStorage(queue);\n\t}\n};\nexport { onAddToWatched, onAddToQueue };\n"],"names":["$hGVxz","parcelRequire","$dc1b0ec5a3335941$export$bf348ba91bbfa858","$dc1b0ec5a3335941$export$18da41cc526d0bf2","$dc1b0ec5a3335941$export$e330b7faa493c08b","JSON","parse","localStorage","getItem","$dc1b0ec5a3335941$export$4f7fa46ff53e516f","$dc1b0ec5a3335941$export$8f82095ba65cbc7c","arr","setItem","stringify","$dc1b0ec5a3335941$export$c3f673b3d7b84035","$d2f6a749601b277e$export$8365ca842e8c6100","movie","movieInWatched","find","obj","id","splice","indexOf","push","$d2f6a749601b277e$export$f1fef8fa31d6cdf5","movieInQueue","$2ea800676e6f7669$var$gallerysDom","$b08YZ","qs","$2ea800676e6f7669$var$galleryTrendDom","$2ea800676e6f7669$var$modal","$2ea800676e6f7669$var$closeModalBtn","$2ea800676e6f7669$var$mov","$2ea800676e6f7669$var$toggleModal","classList","toggle","$2ea800676e6f7669$var$searchMovieById","async","movieId","$fHyLY","showHideLoader","$dlUZe","default","loader","response","get","$dx1nB","BASE_URL","API_KEY","data","$2ea800676e6f7669$var$fetchMovie","movieName","title","vote","vote_average","toFixed","votes","vote_count","popularity","originalTitle","original_title","genres","map","ob","name","join","overview","zwiastun","results","key","poster","poster_path","window","devicePixelRatio","innerHTML","watchedButton","queueButton","zwButton","div","document","querySelector","mod","closeModBtn","iframe","openTrailer","vid","src","addEventListener","style","display","e","preventDefault","closeByClicked","event","target","closeByPushed","keyCode","background","textContent","error","console","log","message","movieCard","closest","dataset","then","catch"],"version":3,"file":"index.7112f342.js.map"}